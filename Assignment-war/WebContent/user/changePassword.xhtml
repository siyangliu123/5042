<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"> 

<h:head>
	<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
          <h:outputStylesheet library="css" name="bootstrap.min.css"></h:outputStylesheet>
  
</h:head> 
<body> 
<h2>Change your password</h2>
		<br/>
		<h:form id="MyForm">
			<h2>Your Username: #{usersController.user.username}</h2>
			<label for="password">Password</label>
			<h:inputSecret type="password" class="form-control password" id="password" value="#{usersController.user.password}" title="password" binding="#{password}" required="true" requiredMessage="Please enter the password!"  pt:placeholder="Password" />
			<br/>
			<label for="confirmPassword">Confirm Password</label>
			<h:inputSecret type="password" class="form-control confirmPassword" id="confirmPassword" title="confirmPassword" required="true" requiredMessage="Please confirm the password!"  pt:placeholder="Confirm Password" />
			<br/>
			<div class="error" style="background-color:red;padding:5px;color:white;display: none">Your passwords do not match!</div>
			<br/>
	        <h:commandButton id="save" value="Save" action="#{usersManagedBean.editUsers(usersController.user)}"  class="btn btn-primary save" >
	            <f:param name="userID" value="#{usersController.user.userID}"/>
	        </h:commandButton>
        </h:form>

</body> 
<script>
	$(".form-control").on("keyup", function(){
		if($(".confirmPassword").val()!==$(".password").val()){
			$(".save").attr("disabled", true);
			$(".error").show();
		}
		else{
			$(".save").attr("disabled", false);
			$(".error").hide();
		}
	});
	
</script>
</html>
